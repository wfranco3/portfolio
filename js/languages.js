/* ===================================================================
 * Language Manager - Multi-language Support (PT/EN)
 *
 * Gerencia tradução do site de forma elegante e eficiente
 * ===================================================================*/

const translations = {
    pt: {
        // Menu
        menu_home: "Home",
        menu_about: "Sobre mim",
        menu_services: "Serviços",
        menu_folio: "Projetos",
        menu_contact: "Contato",
        menu_toggle: "Menu",

        // Intro
        intro_title_1: "Ofereço soluções criativas",
        intro_title_2: "para transformar suas",
        intro_title_3: "ideias em realidade digital",
        intro_btn: "Saiba Mais",
        intro_scroll: "Deslize para baixo",

        // About
        about_pretitle: "Sobre mim",
        about_title: "Sou desenvolvedor Low-Code focado em criar soluções digitais eficientes e escaláveis.",
        about_desc: "Atuo com FlutterFlow e Supabase criando aplicações modernas, rápidas e bem estruturadas. Meu foco é transformar ideias em produtos funcionais, com boa experiência e prontos para crescer.",
        about_scope_title: "Escopo",
        about_scope_desc: "Descobri e expando seus objetivos de negócio, então construo um plano para realizá-los.",
        about_design_title: "Design",
        about_design_desc: "Estruturo a experiência do usuário e o fluxo do app pensando em clareza, usabilidade e conversão.",
        about_develop_title: "Desenvolvimento",
        about_develop_desc: "Desenvolvo aplicações usando FlutterFlow, Supabase e integrações modernas com N8N.",
        about_publish_title: "Publicação",
        about_publish_desc: "Publicação, testes finais e entrega do projeto pronto para uso.",

        // Services
        services_pretitle: "O que ofereço",
        services_title: "Serviços personalizados para fazer seu projeto sair do papel, crescer e se destacar.",
        services_desc: "Meu objetivo é entregar soluções digitais que atendam às suas necessidades.",
        service_objective_title: "Objetivo",
        service_objective_desc: "Criação de MVPs e produtos digitais funcionais para validar ideias rapidamente.",
        service_1_title: "Desenvolvimento de Aplicativos",
        service_1_desc: "Desenvolvimento de aplicativos Android e iOS usando FlutterFlow.",
        service_2_title: "Desenvolvimento Frontend",
        service_2_desc: "Criação de interfaces modernas e responsivas com as melhores práticas.",
        service_3_title: "Consultoria e Estratégia",
        service_3_desc: "Consultoria em desenvolvimento de aplicações e estratégia tecnológica.",
        service_4_title: "Otimização de Performance",
        service_4_desc: "Otimização de aplicações para melhor performance e experiência do usuário.",
        service_extra_title: "Serviço Extra",
        service_extra_desc: "Consultoria adicional e suporte técnico para seus projetos.",

        // Portfolio
        portfolio_pretitle: "Projetos recentes",
        portfolio_title: "Aqui estão alguns projetos que realizei recentemente.",
        portfolio_desc: "Alguns projetos são simples e outros mais complexos, mas todos focados em entregar valor real e demonstrar capacidade técnica.",

        // Modais
        modal_01_title: "App para delivery",
        modal_01_desc: "Um Saas MVP para delivery, conta com app cliente e pagina web para adminstração",
        modal_02_title: "Caffeine & Tulips",
        modal_02_desc: "Projeto de branding e identidade visual para marca de café.",
        modal_03_title: "Grayscale",
        modal_03_desc: "Projeto de design de produto com design system completo.",
        modal_04_title: "The Lamp",
        modal_04_desc: "Loja de e-commerce especializada em iluminação e design.",
        modal_05_title: "Tropical",
        modal_05_desc: "Projeto de frontend com design moderno e responsivo.",
        modal_06_title: "Woodcraft",
        modal_06_desc: "E-commerce de produtos artesanais em madeira.",

        // Tecnologias
        tech_title: "Tecnologias que trabalhamos",

        // Footer
        footer_pretitle: "Entre em contato",
        footer_title: "Tem uma ideia ou um projeto épico em mente? Fale conosco. Vamos trabalhar juntos e criar algo incrível.",
        footer_address_title: "Localização",
        footer_address: "1600 Amphitheatre Parkway, Mountain View, California 94043 US",
        footer_phone_title: "Telefone",
        footer_subscribe_title: "Inscrever-se",
        footer_subscribe_placeholder: "Seu endereço de email",
        cta_title: "Vamos conversar",

        // CTA
        cta_subtitle: "Estou aberto a oportunidades de freelance e projetos de tempo integral.",

        // Footer
        footer_say_hello: "Diga Olá",
        footer_email: "E-mail",
        footer_phone: "Telefone",
        footer_copyright: "© Copyright intelligentio 2026",
        footer_links: "Links",
        footer_back_to_top: "Voltar ao Topo",
    },
    
    en: {
        // Menu
        menu_home: "Home",
        menu_about: "About Me",
        menu_services: "Services",
        menu_folio: "Portfolio",
        menu_contact: "Contact",

        // Intro
        intro_title_1: "I offer creative solutions",
        intro_title_2: "to transform your",
        intro_title_3: "ideas into digital reality",
        intro_btn: "Learn More",
        intro_scroll: "Scroll Down",

        // About
        about_pretitle: "About Me",
        about_title: "I'm a Low-Code developer focused on creating efficient and scalable digital solutions.",
        about_desc: "I work with FlutterFlow and Supabase creating modern, fast and well-structured applications. My focus is to transform ideas into functional products, with great experience and ready to grow.",
        
        about_scope_title: "Scope",
        about_scope_desc: "I discover and expand your business goals, then build a plan to accomplish them.",
        
        about_design_title: "Design",
        about_design_desc: "I structure the user experience and app flow thinking about clarity, usability and conversion.",
        
        about_develop_title: "Development",
        about_develop_desc: "I develop applications using FlutterFlow, Supabase and modern integrations with N8N.",
        
        about_publish_title: "Publishing",
        about_publish_desc: "Publishing, final testing and project delivery ready for use.",

        // Services
        services_pretitle: "What I Offer",
        services_title: "Customized services to take your project off the ground, grow and stand out.",
        services_desc: "My goal is to deliver digital solutions that meet your needs.",
        service_objective_title: "Goal",
        service_objective_desc: "Creating MVPs and functional digital products to validate ideas quickly.",
        service_1_title: "Application Development",
        service_1_desc: "Development of Android and iOS applications using FlutterFlow.",
        
        service_2_title: "Frontend Development",
        service_2_desc: "Creation of modern and responsive interfaces with best practices.",
        
        service_3_title: "Consulting and Strategy",
        service_3_desc: "Consulting in application development and technology strategy.",
        
        service_4_title: "Performance Optimization",
        service_4_desc: "Optimization of applications for better performance and user experience.",
        service_extra_title: "Extra Service",
        service_extra_desc: "Additional consulting and technical support for your projects.",

        // Portfolio
        portfolio_pretitle: "Recent Projects",
        portfolio_title: "Here are some projects I've done recently.",
        portfolio_desc: "Some projects are simple and others more complex, but all focused on delivering real value and demonstrating technical capacity.",
        modal_01_title: "Delivery App",
        modal_01_desc: "A Saas MVP for delivery, with client app and web page for administration",
        modal_02_title: "Caffeine & Tulips",
        modal_02_desc: "Branding and visual identity project for coffee brand.",
        modal_03_title: "Grayscale",
        modal_03_desc: "Product design project with complete design system.",
        modal_04_title: "The Lamp",
        modal_04_desc: "E-commerce store specialized in lighting and design.",
        modal_05_title: "Tropical",
        modal_05_desc: "Frontend project with modern and responsive design.",
        modal_06_title: "Woodcraft",
        modal_06_desc: "E-commerce for handcrafted wooden products.",
        tech_title: "Technologies We Work With",

        // Footer
        footer_pretitle: "Get in Touch",
        footer_title: "Have an epic idea or project in mind? Let's talk. Let's work together and create something amazing.",
        footer_address_title: "Location",
        footer_address: "1600 Amphitheatre Parkway, Mountain View, California 94043 US",
        footer_phone_title: "Phone",
        footer_subscribe_title: "Subscribe",
        footer_subscribe_placeholder: "Your Email Address",
        cta_title: "Let's Talk",
        cta_subtitle: "I'm open to freelance opportunities and full-time projects.",

        // Footer
        footer_say_hello: "Say Hello",
        footer_email: "Email",
        footer_phone: "Phone",
        footer_address: "Location",
        footer_copyright: "© Copyright intelligentio 2026",
        footer_links: "Links",
        footer_back_to_top: "Back to Top",
    }
};

class LanguageManager {
    constructor() {
        this.currentLang = this.detectLanguage();
        this.init();
    }

    // Detecta idioma do navegador ou usa o salvo
    detectLanguage() {
        const saved = localStorage.getItem('selectedLanguage');
        if (saved) return saved;

        const browserLang = navigator.language.split('-')[0];
        return (browserLang === 'pt' || browserLang === 'en') ? browserLang : 'pt';
    }

    // Inicializa o gerenciador
    init() {
        this.setLanguage(this.currentLang);
        this.setupLanguageButtons();
    }

    // Configura botões de idioma
    setupLanguageButtons() {
        document.querySelectorAll('.lang-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                e.preventDefault();
                const lang = btn.dataset.lang;
                this.setLanguage(lang);
            });
        });
    }

    // Define o idioma e atualiza a página
    setLanguage(lang) {
        this.currentLang = lang;
        localStorage.setItem('selectedLanguage', lang);
        
        // Atualiza botões ativos
        document.querySelectorAll('.lang-btn').forEach(btn => {
            btn.classList.toggle('active', btn.dataset.lang === lang);
        });

        // Atualiza todos os elementos com data-i18n
        this.translatePage();
        
        // Atualiza atributo lang do HTML
        document.documentElement.lang = lang;
    }

    // Traduz todos os elementos da página
    translatePage() {
        document.querySelectorAll('[data-i18n]').forEach(element => {
            const key = element.dataset.i18n;
            const text = translations[this.currentLang][key];
            
            if (text) {
                if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                    element.placeholder = text;
                } else if (element.tagName === 'A' && element.classList.contains('entry__link')) {
                    // Para links de projeto, não alterar
                    return;
                } else {
                    element.textContent = text;
                }
            }
        });

        // Atualiza HTML content (para múltiplas linhas como títulos)
        document.querySelectorAll('[data-i18n-html]').forEach(element => {
            const key = element.dataset.i18nHtml;
            const text = translations[this.currentLang][key];
            if (text) element.innerHTML = text;
        });
    }

    // Função helper para obter tradução
    t(key) {
        return translations[this.currentLang][key] || key;
    }
}

// Inicializa quando o DOM está pronto
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', () => {
        window.languageManager = new LanguageManager();
    });
} else {
    window.languageManager = new LanguageManager();
}
